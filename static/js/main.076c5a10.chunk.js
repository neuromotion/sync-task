(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"<div class=".concat(n?"center_container":t?"main-prompt":"main",">").concat(e,"</div>")}},14:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var r=n(4),o=n(24),a=n(25),i=n.n(a),c=!1;if(r.b.USE_ELECTRON){var s=window.require("electron");c=s.ipcRenderer}var u=function(){var e=r.b.USE_PHOTODIODE?"visible":"invisible";return'<div class="photodiode-box '.concat(e,'" id="photodiode-box">\n\t\t\t\t\t\t\t\t\t<span id="photodiode-spot" class="photodiode-spot"></span>\n  \t\t\t\t\t\t\t\t</div>')},d=function(e){if(r.b.USE_PHOTODIODE){var t=e;e<o.eventCodes.open_task&&(t=1),function e(t,n){n>0&&function(e,t){i()(".photodiode-spot").css({"background-color":"black"}),setTimeout(function(){i()(".photodiode-spot").css({"background-color":"white"}),t()},e)}(t,function(){setTimeout(function(){e(t,n-1)},t)})}(40,t),c&&c.send("trigger",e)}}},18:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return s});var r,o=n(15),a=function(e){return new Promise(function(t){return setTimeout(t,e)})},i=((r=n(66)).keys().map(r),function(){var e=o.jsPsych.turk.turkInfo();return"".concat(e.workerId,":").concat(e.assignmentId)}),c=function(){return function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(decodeURIComponent(r[0])===e)return decodeURIComponent(r[1])}}("PROLIFIC_PID")},s=function(e){var t=new AudioContext,n=t.createOscillator(),r=t.createGain();n.type=e.type,n.connect(r),n.frequency.setValueAtTime(e.frequency,0),console.log(t.currentTime),r.connect(t.destination),n.start(),n.stop(t.currentTime+.4)}},24:function(e,t){e.exports={eventCodes:{start:1,stop:2,open_task:"17"}}},4:function(e,t,n){"use strict";n.d(t,"e",function(){return d}),n.d(t,"d",function(){return O}),n.d(t,"b",function(){return C}),n.d(t,"a",function(){return u});var r=n(15),o=n(27),a=n.n(o),i=n(24);n.d(t,"c",function(){return i.eventCodes});var c=n(39),s=n(18),u={frequency:100*(i.eventCodes.open_task-9),type:"sine"},d="Interview",_=!r.jsPsych.turk.turkInfo().outsideTurk,l=Object(s.b)()&&!_,E=!0,p="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_FIREBASE,f="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_AT_HOME;try{window.require("electron")}catch(h){E=!1}var v="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_VOLUME,b="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_VIDEO&&E,A="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_USE_EEG&&E,P="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_USE_PHOTODIODE&&E,O=n(69);if(!E){var m=n(70);a.a.merge(O,m)}var C=Object(c.init)({USE_PHOTODIODE:P,USE_EEG:A,USE_ELECTRON:E,USE_MTURK:_,USE_VOLUME:v,USE_CAMERA:b,USE_PROLIFIC:l,USE_FIREBASE:p,AT_HOME:f,TASK_NAME:d})},40:function(e,t,n){"use strict";(function(e){var r=n(17),o=n.n(r),a=n(41),i=n(22),c=n(4),s=n(14),u=n(13),d=n(15),_=!1;if(c.b.USE_ELECTRON){var l=window.require("electron");_=l.ipcRenderer}t.a=function(){document.title=c.e;var t='\n  <div class="d-flex flex-column align-items-center">\n  <p>'.concat(c.d.instructions.camera,'</p>\n  <video id="camera" width="640" height="480" autoplay></video>\n  </div>\n  ');return{type:"html_button_response",stimulus:Object(u.a)(t,!0)+Object(s.b)(),choices:[c.d.prompt.continue.button],response_ends_trial:!0,on_load:function(){var t=d.jsPsych.data.get().values()[0].participant_id,n=document.getElementById("camera"),r=function(r,o){console.log(r),"cameraCapture"===o&&(n.srcObject=r);var a=[];window[o]=new MediaRecorder(r,{mimeType:"video/webm"}),window[o].addEventListener("dataavailable",function(e){e.data.size>0&&a.push(e.data)}),window[o].addEventListener("stop",function(){!function(t,n,r){var o=new FileReader,a="pid_".concat(r,"_").concat(n,"_").concat(Date.now(),".webm");o.onload=function(){if(2===o.readyState){var n=new e(o.result);_.send("save_video",a,n),console.log("Saving ".concat(JSON.stringify({fileName:a,size:t.size})))}},o.readAsArrayBuffer(t)}(new Blob(a),o,t)})};navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){return r(e,"cameraCapture")}),window.require("electron").desktopCapturer.getSources({types:["window"]}).then(function(){var e=Object(i.a)(o.a.mark(function e(t){var n,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(a.a)(t);try{for(n.s();!(i=n.n()).done;)(s=i.value).name===c.e&&navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s.id}}}).then(function(e){r(e,"screenCapture")}).catch(function(e){return console.log(e)})}catch(o){n.e(o)}finally{n.f()}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},on_finish:function(){c.b.USE_CAMERA&&(window.cameraCapture.start(),window.screenCapture.start())}}}}).call(this,n(71).Buffer)},43:function(e,t,n){e.exports=n(83)},48:function(e,t,n){},50:function(e,t,n){},66:function(e,t,n){var r={"./blue_payout_correct_10.png":67,"./blue_payout_correct_100.png":68};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=66},67:function(e,t,n){e.exports=n.p+"static/media/blue_payout_correct_10.f515a81e.png"},68:function(e,t,n){e.exports=n.p+"static/media/blue_payout_correct_100.ae2416c7.png"},69:function(e){e.exports={task:{name:"Sync-task",end:"This task has ended."},prompt:{press:"Press any key to continue.",continue:"Continue",start:"Start",stop:"Stop",focus:"Make sure the photodiode is covering the spot and any external recordings have begun before continuing.",fullscreen:"Press 'cmd + ctrl + F' to toggle Fullscreen.",zoom:"Zoom in to enlarge the screen.",setting_up:"Setting up task...",heading:{open_task:"Setting up task...",start:"Starting",stop:"Stopping"}},userid:{set:"Please enter subject ID."},eventMarker:{found:"Note: event marker found.",not_found:"Note: no USB event marker found."},instructions:{adjust_volume:"Set tablet volume to 50/100.",make_sure:"Please place the CTM in your pocket. Make sure zoom recording and device recording has begun before pressing continue",start:"Press start when you are ready to begin.",stop:"Press stop when the task is over. Then stop all recordings."}}},70:function(e){e.exports={welcome:{message:"Welcome to the NEURO experiment."},userid:{set:"Setting up user ID."}}},83:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(38),i=n.n(a),c=(n(48),n(17)),s=n.n(c),u=n(22),d=n(16),l=(n(50),n(51),n(52),n(20)),E=n(42);var p=function(e){var t=e.onLogin,n=e.envParticipantId,a=e.envStudyId,i=e.validationFunction,c=Object(r.useState)(""),s=Object(d.a)(c,2),u=s[0],_=s[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),v=f[0],b=f[1],A=Object(r.useState)(!1),P=Object(d.a)(A,2),O=P[0],m=P[1];return Object(r.useEffect)(function(){_(n),b(a)},[n,a]),o.a.createElement("div",{className:"centered-h-v"},o.a.createElement("div",{className:"width-50"},O?o.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The participant ID and study ID do not match"):null,o.a.createElement(l.a,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),i(u,v).then(function(e){e?t(e,v,u):m(!0)})}},o.a.createElement(l.a.Group,{className:"width-100",size:"lg",controlId:"participantId"},o.a.createElement(l.a.Label,null,"Participant ID"),o.a.createElement(l.a.Control,{autoFocus:!0,type:"participantId",value:u,onChange:function(e){return _(e.target.value)}})),o.a.createElement(l.a.Group,{className:"width-100",size:"lg",controlId:"studyId"},o.a.createElement(l.a.Label,null,"Study ID"),o.a.createElement(l.a.Control,{type:"studyId",value:v,onChange:function(e){return b(e.target.value)}})),o.a.createElement(E.a,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:!(u.length>0&&v.length>0)},"Log In"))))},f=n(15),v=n(4),b=n(14),A=n(13),P=function(e){return{type:"html_keyboard_response",stimulus:Object(A.a)("<h1>".concat(v.d.task.end,"</h1>"),!0)+Object(b.b)(),trial_duration:e}},O=n(18),m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"html_keyboard_response",stimulus:Object(A.a)("<h1>".concat(v.d.prompt.heading[e],"</h1>"),!0)+Object(b.b)(),trial_duration:t,on_load:function(){Object(b.a)(v.c[e]),console.log(v.c[e]),!0===n&&Object(O.a)(v.a)}}},C=function(e){return{type:"html_button_response",stimulus:Object(A.a)("<div><h2>".concat(v.d.instructions[e],"</h2></div>"),!0)+Object(b.b)(),choices:[v.d.prompt[e]]}};console.log(Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}));var h=function(){return{type:"html_button_response",stimulus:Object(A.a)("<h1>".concat("Interview","</h1>"),!0)+Object(b.b)(),choices:[v.d.prompt.continue]}},T=function(){return{type:"html_keyboard_response",stimulus:Object(A.a)("<h1>".concat(v.d.prompt.setting_up,"</h1>"),!0)+Object(b.b)(),trial_duration:2e3,on_load:function(){Object(b.a)(v.c.open_task),Object(O.a)(v.a)}}},I=function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",'<span style="color: green;">'.concat(v.d.eventMarker.found,"</span>"));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(){return{type:"html_button_response",stimulus:Object(A.a)("<div>\n    <h2 id='usb-alert'></h2></div>",!0)+Object(b.b)(),choices:[v.d.prompt.continue],on_load:function(){return I().then(function(e){return document.getElementById("usb-alert").innerHTML=e})}}},R=function(){return{type:"html_button_response",stimulus:Object(A.a)("\n    <div class='instructions'>\n    <h1>".concat(v.d.instructions.adjust_volume,"</h1>\n    </div>\n    "),!0),choices:[v.d.prompt.continue],response_ends_trial:!0}},g=n(40),N=[h()];v.b.USE_VOLUME&&N.push(R()),v.b.USE_EEG&&(N.push(w()),N.push(T())),v.b.USE_CAMERA&&N.push(Object(g.a)());var S=[{type:"html_keyboard_response",stimulus:"",timeline:N},C("start"),m("start",500),C("stop"),m("stop",500),P(5e3)];var U=function(e){var t=e.dataUpdateFunction,n=e.dataFinishFunction;return o.a.createElement("div",{className:"App"},o.a.createElement(f.Experiment,{settings:{timeline:S,on_data_update:function(e){return t(e)},on_finish:function(e){return n(e)}}}))},j=n(30);n(79);n(80).config();var y={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_apiKey,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_authDomain,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_databaseURL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_projectId||"no-firebase",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_storageBucket,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_messagingSenderId,appId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_EVENT_CODE:"17",REACT_APP_ICON:"interview.icns",REACT_APP_TASK_NAME:"Interview"}).REACT_APP_appId},k=j.a.initializeApp(y).firestore();"localhost"===window.location.hostname&&k.useEmulator("localhost",8080);var D=function(e,t,n){return k.collection("participant_responses").doc(t).collection("participants").doc(e).collection("data").doc(n).set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform,results:[]}).then(function(){return!0}).catch(function(e){return!1})},L=function(e){console.log(e);var t=e.participant_id,n=e.study_id,r=e.start_date;k.collection("participant_responses").doc(n).collection("participants").doc(t).collection("data").doc(r).update("results",j.a.firestore.FieldValue.arrayUnion(e))};j.a;var M=function(){var e=(new Date).toISOString(),t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(!1),l=Object(d.a)(c,2),E=l[0],b=l[1],A=Object(r.useState)(!1),P=Object(d.a)(A,2),m=P[0],C=P[1],h=Object(r.useState)(""),T=Object(d.a)(h,2),I=T[0],w=T[1],R=Object(r.useState)(""),g=Object(d.a)(R,2),N=g[0],S=g[1],j=Object(r.useState)("default"),y=Object(d.a)(j,2),k=y[0],M=y[1],V=Object(r.useState)(!1),B=Object(d.a)(V,2),F=B[0],x=B[1],K=new URLSearchParams(window.location.search),z=function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),H=function(e){},q=Object(r.useCallback)(function(t,n,r){t&&f.jsPsych.data.addProperties({participant_id:r,study_id:n,start_date:e}),i(t)},[e]);return Object(r.useEffect)(function(){if(console.log("Turk:",v.b.USE_MTURK),console.log("Firebase:",v.b.USE_FIREBASE),console.log("Prolific:",v.b.USE_PROLIFIC),console.log("Electron:",v.b.USE_ELECTRON),console.log("Video:",v.b.USE_CAMERA),console.log("Volume:",v.b.USE_VOLUME),console.log("Event Marker:",v.b.USE_EEG),console.log("Photodiode:",v.b.USE_PHOTODIODE),v.b.USE_ELECTRON){var e=window.require("electron").ipcRenderer;b(e),e.send("updateEnvironmentVariables",v.b);var t=e.sendSync("syncCredentials");t.envParticipantId&&w(t.envParticipantId),t.envStudyId&&S(t.envStudyId),M("desktop")}else if(v.b.USE_MTURK){window.lodash=_.noConflict();var n=Object(O.c)();C(new PsiTurk(n,"/complete")),M("mturk"),q(!0,"mturk",n)}else if(v.b.USE_PROLIFIC){var r=Object(O.b)();v.b.USE_FIREBASE&&r?(M("firebase"),q(!0,"prolific",r)):x(!0)}else if(v.b.USE_FIREBASE){M("firebase");var o=K.get("participantID"),a=K.get("studyID");o&&w(o),a&&S(a)}else x(!0)},[]),F?o.a.createElement("div",{className:"centered-h-v"},o.a.createElement("div",{className:"width-50 alert alert-danger"},"Please ask your task provider to enable firebase.")):o.a.createElement(o.a.Fragment,null,a?o.a.createElement(U,{dataUpdateFunction:{desktop:function(e){E.send("data",e)},firebase:function(e){L(e)},mturk:function(e){m.recordTrialData(e)},default:H}[k],dataFinishFunction:{desktop:function(){E.send("end","true")},mturk:function(){!function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.saveData(),e.next=3,Object(O.d)(5e3);case 3:m.completeHIT();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},firebase:H,default:H}[k]}):o.a.createElement(p,{validationFunction:{desktop:z,default:z,firebase:function(t,n){return D(t,n,e)}}[k],envParticipantId:I,envStudyId:N,onLogin:q}))};i.a.render(o.a.createElement(M,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.076c5a10.chunk.js.map